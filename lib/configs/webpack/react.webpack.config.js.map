{"version":3,"sources":["../../../src/configs/webpack/react.webpack.config.js"],"names":["reactBabelPresets","reactBabelPlugin","RHL_patch","spa","entry","rules","plugins","server","target","output","filename","libraryTarget","optimize","LimitChunkCountPlugin","maxChunks","BannerPlugin","banner","raw","entryOnly","externals","whitelist","devtool","node","console","global","process","Buffer","__filename","__dirname"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;AASA;;;;AACA;;;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,oBAAoB;AACzB;AACA;AACA,OAHyB;;AAKzB;AACA;AACA;AACA;AACA,IAAG,kCAAe,CAAC,gBAAD,CAAf,GAAoC,EAAvC,CATyB,CAA1B;;AAYA,MAAMC,mBAAmB;AACxB;AACA;AACA,IAAG,kCAAe,CAAC,mBAAD,CAAf,GAAuC,EAA1C,CAHwB;;AAKxB;AACA,IAAG,+DAAyB,CAAC,wBAAD,CAAzB,GAAsD,EAAzD,CANwB;;AAQxB;AACA;AACA,IAAG,mCAAgB,CAAC,4BAAD,CAAhB,GAAiD,EAApD,CAVwB;;AAYxB;AACA;AACA,IAAG,mCAAgB,CAAC,0BAAD,CAAhB,GAA+C,EAAlD,CAdwB,CAAzB;;AAiBA,MAAMC,YAAY,2BAAQ,CAAC,wBAAD,CAAR,GAAqC,EAAvD;;AAEA,MAAMC,MAAM,8BAAqB;AAChCC,QAAO,kCAAe,4BAAgB,CACrC,GAAGF,SADkC,CAAhB,CAAf,GAEF,qBAAS,CACb,GAAGA,SADU,CAAT,CAH2B;AAMhCG,QAAO,CACN,qBACC,cADD,EAECL,iBAFD,EAGCC,gBAHD,kCAKC,CAAC,cAAD,EAAiB,SAAjB,CALD,CADM,EAQN,uBARM,EASN,uBATM,EAUN,kBAVM,CANyB;AAkBhCK,UAAS,CACR,yBADQ,EAER,GAAG,uBAFK,EAGR,GAAG,cAHK,EAIR,GAAG,iBAJK,EAKR,GAAG,wBALK,EAMR,GAAG,2BANK;AAlBuB,CAArB,CAAZ;;AA4BA,MAAMC,SAAS,8BAAqB;AACnCH,QAAO,yBAD4B;AAEnCI,SAAQ,MAF2B;AAGnCC,SAAQ;AACPC,6CADO;AAEPC,iBAAe;AAFR,EAH2B;AAOnCN,QAAO;AACN;AACA,sBACC,cADD,EAECL,iBAFD,EAGCC,gBAHD,oCAFM,EAQN,uBARM,EASN,uBATM,EAUN,kBAVM,CAP4B;AAmBnCK,UAAS;;AAER;AACA;AACA,KAAI,kBAAQM,QAAR,CAAiBC,qBAArB,CAA2C,EAACC,WAAW,CAAZ,EAA3C,CAJQ;;AAMR;AACA;AACA,KAAI,kBAAQC,YAAZ,CAAyB;AACxBC,UAAQ,0CADgB;AAExBC,OAAK,IAFmB;AAGxBC,aAAW;AAHa,EAAzB,CARQ,CAnB0B;AAiCnCC,YAAW,CACV,oBADU,EAEV,oBAFU,EAGV,oCAAc;AACbC,aAAW;AADE,EAAd,CAHU,CAjCwB;AAwCnCC,UAAS,mCAAgB,yBAAhB,GAA4C,YAxClB;AAyCnCC,OAAM;AACLC,WAAS,KADJ;AAELC,UAAQ,KAFH;AAGLC,WAAS,KAHJ;AAILC,UAAQ,KAJH;AAKLC,cAAY,KALP;AAMLC,aAAW;AANN;AAzC6B,CAArB,CAAf;;kBAmDe,kCAAe,CAACzB,GAAD,EAAMI,MAAN,CAAf,GAA+BJ,G","file":"react.webpack.config.js","sourcesContent":["import webpack from 'webpack'\nimport nodeExternals from 'webpack-node-externals'\nimport {\n\tisDevelopment,\n\tisProduction,\n\tisIsomorphic,\n\tbabelEnvSpa,\n\tbabelEnvServer,\n\tfilenameServer,\n\tisRHL\n} from '../prepare.build-tools.config'\nimport generalWebpackConfig from './general.webpack.config'\nimport babelRules from './rules/babel'\nimport { internalCSS, externalCSS } from './rules/css'\nimport { file } from './rules/files'\nimport { extractCSS } from './plugins/css'\nimport { HMR, extractVendors, uglify, getAssetsFile, getIndexHtmlFile } from './plugins/js'\nimport { spaEntry, isomorphicEntry, serverEntry } from './general/entry'\n\nconst reactBabelPresets = [\n\t// JSX, Flow\n\t// https://github.com/babel/babel/tree/master/packages/babel-preset-react\n\t'react',\n\n\t// Optimize React code for the production build\n\t// https://github.com/thejameskyle/babel-react-optimize\n\t// https://github.com/thejameskyle/babel-react-optimize#transform-react-inline-elements\n\t// Note: You should use this with babel-runtime and babel-transform-runtime to avoid duplicating the helper code in every file.\n\t...isProduction ? ['react-optimize'] : [],\n]\n\nconst reactBabelPlugin = [\n\t// https://www.npmjs.com/package/babel-plugin-transform-runtime\n\t// Note: You should use this with babel-runtime and babel-transform-runtime to avoid duplicating the helper code in every file.\n\t...isProduction ? ['transform-runtime'] : [],\n\n\t// http://gaearon.github.io/react-hot-loader/getstarted/\n\t...isDevelopment && isRHL ? ['react-hot-loader/babel'] : [],\n\n\t// Adds component stack to warning messages\n\t// https://github.com/babel/babel/tree/master/packages/babel-plugin-transform-react-jsx-source\n\t...isDevelopment ? ['transform-react-jsx-source'] : [],\n\n\t// Adds __self attribute to JSX which React will use for some warnings\n\t// https://github.com/babel/babel/tree/master/packages/babel-plugin-transform-react-jsx-self\n\t...isDevelopment ? ['transform-react-jsx-self'] : [],\n]\n\nconst RHL_patch = isRHL ? ['react-hot-loader/patch'] : []\n\nconst spa = generalWebpackConfig({\n\tentry: isIsomorphic ? isomorphicEntry([\n\t\t...RHL_patch\n\t]) : spaEntry([\n\t\t...RHL_patch\n\t]),\n\trules: [\n\t\tbabelRules(\n\t\t\t/\\.(jsx|js)?$/,\n\t\t\treactBabelPresets,\n\t\t\treactBabelPlugin,\n\t\t\tbabelEnvSpa,\n\t\t\t[/node_modules/, /mobx.js/]\n\t\t),\n\t\tinternalCSS(),\n\t\texternalCSS(),\n\t\tfile()\n\t],\n\tplugins: [\n\t\textractVendors(),\n\t\t...extractCSS(),\n\t\t...HMR(),\n\t\t...uglify(),\n\t\t...getAssetsFile(),\n\t\t...getIndexHtmlFile()\n\t]\n})\n\nconst server = generalWebpackConfig({\n\tentry: serverEntry(),\n\ttarget: 'node',\n\toutput: {\n\t\tfilename: filenameServer,\n\t\tlibraryTarget: 'commonjs2'\n\t},\n\trules: [\n\t\t// Override babel-preset-env configuration for Node.js\n\t\tbabelRules(\n\t\t\t/\\.(js|jsx)?$/,\n\t\t\treactBabelPresets,\n\t\t\treactBabelPlugin,\n\t\t\tbabelEnvServer\n\t\t),\n\t\tinternalCSS(),\n\t\texternalCSS(),\n\t\tfile()\n\t],\n\tplugins: [\n\n\t\t// Do not create separate chunks of the server bundle\n\t\t// https://webpack.github.io/docs/list-of-plugins.html#limitchunkcountplugin\n\t\tnew webpack.optimize.LimitChunkCountPlugin({maxChunks: 1}),\n\n\t\t// Adds a banner to the top of each generated chunk\n\t\t// https://webpack.github.io/docs/list-of-plugins.html#bannerplugin\n\t\tnew webpack.BannerPlugin({\n\t\t\tbanner: 'require(\"source-map-support\").install();',\n\t\t\traw: true,\n\t\t\tentryOnly: false,\n\t\t}),\n\t],\n\texternals: [\n\t\t/^\\.\\/assets\\.json$/,\n\t\t/^\\.\\/config\\.json$/,\n\t\tnodeExternals({\n\t\t\twhitelist: /\\.css/\n\t\t})\n\t],\n\tdevtool: isDevelopment ? 'cheap-module-source-map' : 'source-map',\n\tnode: {\n\t\tconsole: false,\n\t\tglobal: false,\n\t\tprocess: false,\n\t\tBuffer: false,\n\t\t__filename: false,\n\t\t__dirname: false,\n\t}\n})\n\nexport default isIsomorphic ? [spa, server] : spa\n"]}