{"version":3,"sources":["../src/generalBin.js"],"names":["path","require","meow","spawn","isString","isUndefined","getDescription","module","exports","binName","isRelay","alias","ts","bs","m","i","v","r","d","a","h","input","flags","release","verbose","analyze","debug","mobx","isomorphic","relay","sync","typeScript","rhl","TOOLS_DIR","resolve","__dirname","actionName","length","actionFiles","start","build","process","env","NODE_ENV","BUILD_TOOLS_VERBOSE","BUILD_TOOLS_ANALYZE","WEBPACK_WATCH","WEBPACK_DEBUG","ENABLED_MOBX_TOOLS","ENABLED_ISOMORPHIC","ENABLED_RELAY","ENABLED_BROWSER_SYNC","ENABLED_TYPE_SCRIPT","ENABLED_RHL","result","stdio","signal","console","log","exit","status"],"mappings":"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","file":"generalBin.js","sourcesContent":["'use strict'\nconst path = require('path')\nconst meow = require('meow')\nconst spawn = require('cross-spawn')\nconst {isString, isUndefined} = require('@techintouch/utils/lib')\nconst getDescription = require('./configs/utils/getDescription')\n\nmodule.exports = (binName = 'react-app', isRelay = false) => {\n\tconst {input, flags: {release, verbose, analyze, debug, mobx, isomorphic, relay, sync, typeScript, rhl}} = meow(\n\t\tgetDescription(binName, isRelay),\n\t\t{\n\t\t\talias: {\n\t\t\t\tts: 'typeScript',\n\t\t\t\tbs: 'sync',\n\t\t\t\tm: 'mobx',\n\t\t\t\ti: 'isomorphic',\n\t\t\t\tv: 'verbose',\n\t\t\t\tr: 'release',\n\t\t\t\td: 'debug',\n\t\t\t\ta: 'analyze',\n\t\t\t\th: 'help',\n\t\t\t}\n\t\t}\n\t)\n\n\tconst TOOLS_DIR = path.resolve(__dirname, '../lib/tools', binName)\n\tconst actionName = input.length === 0 ? 'start' : input[0]\n\tconst actionFiles = {\n\t\tstart: path.resolve(TOOLS_DIR, 'start.js'),\n\t\tbuild: path.resolve(TOOLS_DIR, 'build.js'),\n\t}\n\n\tprocess.env.NODE_ENV = !release ? 'development' : 'production'\n\tprocess.env.BUILD_TOOLS_VERBOSE = !isUndefined(verbose) ? verbose : false\n\tprocess.env.BUILD_TOOLS_ANALYZE = !isUndefined(analyze) ? analyze : false\n\tprocess.env.WEBPACK_WATCH = actionName === 'start'\n\tprocess.env.WEBPACK_DEBUG = !isUndefined(debug) ? debug : false\n\tprocess.env.ENABLED_MOBX_TOOLS = !isUndefined(mobx) ? mobx : false\n\tprocess.env.ENABLED_ISOMORPHIC = !isUndefined(isomorphic) ? isomorphic : false\n\tprocess.env.ENABLED_RELAY = !isUndefined(relay) ? relay : false\n\tprocess.env.ENABLED_BROWSER_SYNC = !isUndefined(sync) ? sync : false\n\tprocess.env.ENABLED_TYPE_SCRIPT = !isUndefined(typeScript) ? typeScript : false\n\tprocess.env.ENABLED_RHL = !isUndefined(rhl) ? rhl : false\n\n\tif (isString(actionFiles[actionName])) {\n\t\tconst result = spawn.sync('node', [actionFiles[actionName]], {stdio: 'inherit'})\n\n\t\tif (result.signal) {\n\t\t\tif (result.signal === 'SIGKILL') {\n\t\t\t\tconsole.log(\n\t\t\t\t\t'The build failed because the process exited too early. ' +\n\t\t\t\t\t'This probably means the system ran out of memory or someone called ' +\n\t\t\t\t\t'`kill -9` on the process.'\n\t\t\t\t)\n\t\t\t\tprocess.exit(1)\n\t\t\t} else if (result.signal === 'SIGTERM') {\n\t\t\t\tconsole.log(\n\t\t\t\t\t'The build failed because the process exited too early. ' +\n\t\t\t\t\t'Someone might have called `kill` or `killall`, or the system could ' +\n\t\t\t\t\t'be shutting down.'\n\t\t\t\t)\n\t\t\t\tprocess.exit(1)\n\t\t\t}\n\t\t\tprocess.exit(0)\n\t\t}\n\t\tprocess.exit(result.status)\n\n\t} else {\n\t\tconsole.log('Unknown action \"' + actionName + '\".')\n\t\tconsole.log('Perhaps you need to update react-app?')\n\t\tprocess.exit(1)\n\t}\n}"]}