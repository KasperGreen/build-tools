{"version":3,"sources":["../../src/tools/run.js"],"names":["format","time","toTimeString","replace","run","fn","options","task","default","start","Date","console","info","name","then","resolution","end","getTime","catch","error"],"mappings":";;;;;QAAgBA,M,GAAAA,M;AAAT,SAASA,MAAT,CAAiBC,IAAjB,EAAuB;AAC7B,QAAOA,KAAKC,YAAL,GAAoBC,OAApB,CAA4B,yBAA5B,EAAuD,IAAvD,CAAP;AACA;;AAED,SAASC,GAAT,CAAcC,EAAd,EAAkBC,OAAlB,EAA2B;AAC1B,OAAMC,OAAO,OAAOF,GAAGG,OAAV,KAAsB,WAAtB,GAAoCH,EAApC,GAAyCA,GAAGG,OAAzD;AACA,OAAMC,QAAQ,IAAIC,IAAJ,EAAd;AACAC,SAAQC,IAAR,CACE,IAAGZ,OAAOS,KAAP,CAAc,eAAcF,KAAKM,IAAK,GAAEP,UAAW,KAAIA,OAAQ,GAAvB,GAA4B,EAAG,MAD5E;AAGA,QAAOC,KAAKD,OAAL,EACNQ,IADM,CACAC,UAAD,IAAgB;AACrB,QAAMC,MAAM,IAAIN,IAAJ,EAAZ;AACA,QAAMT,OAAOe,IAAIC,OAAJ,KAAgBR,MAAMQ,OAAN,EAA7B;AACAN,UAAQC,IAAR,CACE,IAAGZ,OAAOgB,GAAP,CAAY,eAAcT,KAAKM,IAAK,GAAEP,UAAW,KAAIA,OAAQ,GAAvB,GAA4B,EAAG,WAAUL,IAAK,KADzF;AAGA,SAAOc,UAAP;AACA,EARM,EASNG,KATM,CASCC,KAAD,IAAW;AACjBR,UAAQQ,KAAR,CAAcA,KAAd;AACA,SAAOA,KAAP;AACA,EAZM,CAAP;AAaA;;kBAEcf,G","file":"run.js","sourcesContent":["export function format (time) {\n\treturn time.toTimeString().replace(/.*(\\d{2}:\\d{2}:\\d{2}).*/, '$1')\n}\n\nfunction run (fn, options) {\n\tconst task = typeof fn.default === 'undefined' ? fn : fn.default\n\tconst start = new Date()\n\tconsole.info(\n\t\t`[${format(start)}] Starting '${task.name}${options ? ` (${options})` : ''}'...`,\n\t)\n\treturn task(options)\n\t.then((resolution) => {\n\t\tconst end = new Date()\n\t\tconst time = end.getTime() - start.getTime()\n\t\tconsole.info(\n\t\t\t`[${format(end)}] Finished '${task.name}${options ? ` (${options})` : ''}' after ${time} ms`,\n\t\t)\n\t\treturn resolution\n\t})\n\t.catch((error) => {\n\t\tconsole.error(error)\n\t\treturn error\n\t})\n}\n\nexport default run\n"]}